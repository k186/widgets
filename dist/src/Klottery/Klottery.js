!function(){function t(t,i){this.id=t,this.dom=null,this.modalDom=null,this.options=o.initOptions(i),this.isFire=!1,o.init.apply(this)}t.prototype={fire:function(){if(!this.isFire){var t=Math.random(),i=0+Math.round(100*t);o.reset.apply(this);var e=this;setTimeout(function(){o.animation.apply(e,[0,i])},1e3)}},showModal:function(t){this.modalDom=$('<div class="Klottery-modalBox">                 <div class="Klottery-mask"></div>                 <div class="Klottery-modal">                    <img class="Klottery-img" src="">                    <div class="Klottery-btn J_ok">确认</div>                 </div>              </div>').clone(),this.modalDom.attr("id","sfsdafdsa"),this.modalDom.find("img").attr("src",t.src);var o=this;this.modalDom.find(".J_ok").on("click",function(){o.hideModal()}),this.modalDom.appendTo($("body"))},hideModal:function(){this.modalDom.remove(),o.reset.apply(this)}};var o={loadDom:function(){this.dom=$('<div class="Klottery"></div>').clone(),this.dom.css("width",(this.options.BoxWidth+2*this.options.margin)*this.options.ColumnCount+"px"),this.dom.css("height",(this.options.BoxHeight+2*this.options.margin)*this.options.CellCount+"px");for(var t=1,o=1;o<this.options.CellCount+1;o++){for(var i=[],e=1;e<this.options.ColumnCount+1;e++){var s=$('<div class="Klottery-box">                <div class="Klottery-item"></div>              </div>').clone();s.css("width",this.options.BoxWidth+"px"),s.css("height",this.options.BoxHeight+"px"),s.css("margin",this.options.margin+"px"),s.attr("data-Klottery",t),s.find(".Klottery-item").css("backgroundImage","url("+this.options.backgroundUrl+t+this.options.imgType+")"),t+=1,i.push(s)}o%2==0&&i.reverse();var n=this;i.forEach(function(t,o){t.appendTo(n.dom)})}if(!this.id)return console.warn("必须输入挂载ID"),!1;this.dom.appendTo($("#"+this.id))},initOptions:function(t){return{speed:t.speed||300,BoxCount:t.CellCount*t.ColumnCount||9,BoxWidth:t.BoxWidth||20,BoxHeight:t.BoxHeight||20,CellCount:t.CellCount||3,ColumnCount:t.ColumnCount||3,margin:t.margin||1,backgroundUrl:t.backgroundUrl||"",imgType:t.imgType||"",color:t.color||"rgba(210, 255, 100, 0.77)",callback:t.callback||!1}},init:function(){o.loadDom.apply(this)},animation:function(t,i){this.isFire=!0,t>=this.options.BoxCount&&(t=0),this.dom.find("div[data-Klottery="+(t+1)+"]").find(".Klottery-item").addClass("active"),this.dom.find("div[data-Klottery="+(t+1)+"]").find(".Klottery-item").css("boxShadow","inset 0 0 10000px 20px "+this.options.color);var e=this;setTimeout(function(){var s=i+8;if(e.options.speed<Math.abs(i))return e.isFire=!1,void("function"==typeof e.options.callback&&e.options.callback());e.dom.find("div[data-Klottery="+(t+1)+"]").find(".Klottery-item").removeClass("active"),e.dom.find("div[data-Klottery="+(t+1)+"]").find(".Klottery-item").css("boxShadow",""),t+=1,o.animation.apply(e,[t,s])},Math.abs(i))},reset:function(){this.dom.find(".active").css("boxShadow",""),this.dom.find(".active").removeClass("active")},loadCss:function(){var t=document.createElement("style");t.innerHTML=".Klottery{display:inline-flex;flex-wrap:wrap}.Klottery *{box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.Klottery-box{position:relative}.Klottery-box.Klottery-active{box-shadow:0 1px 2px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.2)}.Klottery-item{position:absolute;top:0;right:0;bottom:0;left:0;background:0 0;background-repeat:no-repeat;background-position:center;background-size:100%}.Klottery-item.active{box-shadow:inset 0 0 10000px 20px rgba(210,255,100,.77)}.Klottery-mask{position:absolute;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.3)}.Klottery-img{background-repeat:no-repeat;background-position:center;background-size:100%}.Klottery-modal{z-index:2;transform:translateY(20%)}.Klottery-modalBox{display:flex;justify-content:center;align-items:center;position:absolute;top:0;bottom:0;left:0;right:0}.Klottery-btn{border-radius:5px;border:2px solid #fff;color:#fff;text-align:center;font-size:18px;height:40px;line-height:40px;margin:10px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",document.getElementsByTagName("head")[0].appendChild(t)}};o.loadCss(),window.Klottery=t}();